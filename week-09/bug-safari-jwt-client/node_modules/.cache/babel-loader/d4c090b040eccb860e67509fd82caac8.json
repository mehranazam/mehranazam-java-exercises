{"ast":null,"code":"var _jsxFileName = \"/Users/moinulazam/mehranazam-java-exercises/week-09/bug-safari-jwt-client/src/components/SightingForm.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEFAULT_SIGHTING = {\n  sightingId: 0,\n  bugType: \"\",\n  order: {\n    bugOrderId: 0,\n    name: \"\",\n    description: \"\"\n  },\n  description: \"\",\n  date: \"\",\n  interest: 0,\n  imageUrl: \"\"\n};\n\nfunction SightingForm() {\n  _s();\n\n  const [sighting, setSighting] = useState(DEFAULT_SIGHTING);\n  const [orders, setOrders] = useState([]);\n  const history = useHistory();\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    fetch('http://localhost:8080/order').then(response => response.json()).then(data => setOrders(data));\n  }, // Dependency array - only run this once when the component is initially loaded\n  []);\n  useEffect(() => {\n    // Only do this if there is an `id`\n    if (id) {\n      fetch(`http://localhost:8080/sighting/${id}`).then(response => {\n        if (response.status !== 200) {\n          return Promise.reject(\"sighting fetch failed\");\n        }\n\n        return response.json();\n      }).then(data => setSighting(data)).catch(console.log);\n    }\n  }, // Dependency array - only run this in response to any `id`\n  [id]);\n\n  const handleChange = event => {\n    const updatedSighting = { ...sighting\n    };\n\n    if (event.target.name === \"order\") {\n      const bugOrderId = Number.parseInt(event.target.value);\n      updatedSighting.order = orders.find(order => order.bugOrderId === bugOrderId);\n    } else {\n      updatedSighting[event.target.name] = event.target.value;\n    }\n\n    setSighting(updatedSighting);\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const updatedSighting = { ...sighting\n    };\n\n    if (id) {\n      const init = {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify(updatedSighting)\n      };\n      fetch(`http://localhost:8080/sighting/${id}`, init).then(response => {\n        if (response.status !== 204) {\n          return Promise.reject(\"response is not 204 No Content\");\n        }\n\n        return null;\n      }).then(data => {\n        history.push(\"/confirmation\", {\n          msg: \"üëçüèæ\"\n        });\n      }).catch(() => {\n        history.push(\"/error\", {\n          msg: \"üëéüèæ\"\n        });\n      });\n    } else {\n      const init = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify(updatedSighting)\n      };\n      fetch(\"http://localhost:8080/sighting\", init).then(response => {\n        if (response.status !== 201) {\n          return Promise.reject(\"response is not 200 OK\");\n        }\n\n        return response.json();\n      }).then(data => {\n        history.push(\"/confirmation\", {\n          msg: \"üëçüèæ\"\n        });\n      }).catch(() => {\n        history.push(\"/error\", {\n          msg: \"üëéüèæ\"\n        });\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: sighting.sightingId ? \"Update A Sighting\" : \"Add A Sighting\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"bugType\",\n        children: \"Bug Type\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"bugType\",\n        required: true,\n        value: sighting.bugType,\n        name: \"bugType\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"order\",\n        children: \"Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"order\",\n        required: true,\n        value: sighting.order.bugOrderId,\n        name: \"order\",\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"0\",\n          children: \"-- Choose --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), orders.map(order => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: order.bugOrderId,\n          children: [order.name, \" (\", order.description, \")\"]\n        }, order.bugOrderId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: \"Description\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        required: true,\n        value: sighting.description,\n        name: \"description\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"date\",\n        children: \"Date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        id: \"date\",\n        required: true,\n        value: sighting.date,\n        name: \"date\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"interest\",\n        children: \"Interest\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"interest\",\n        min: \"0.00\",\n        step: \"0.01\",\n        required: true,\n        value: sighting.interest,\n        name: \"interest\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"imageURL\",\n        children: \"Image URL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"url\",\n        id: \"imageURL\",\n        defaultValue: sighting.imageUrl,\n        name: \"imageUrl\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SightingForm, \"6HPHWPRdMGsXIGxZYPGQ7ZhErLs=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = SightingForm;\nexport default SightingForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"SightingForm\");","map":{"version":3,"sources":["/Users/moinulazam/mehranazam-java-exercises/week-09/bug-safari-jwt-client/src/components/SightingForm.js"],"names":["useEffect","useState","Link","useHistory","useParams","DEFAULT_SIGHTING","sightingId","bugType","order","bugOrderId","name","description","date","interest","imageUrl","SightingForm","sighting","setSighting","orders","setOrders","history","id","fetch","then","response","json","data","status","Promise","reject","catch","console","log","handleChange","event","updatedSighting","target","Number","parseInt","value","find","handleSubmit","preventDefault","init","method","headers","Accept","body","JSON","stringify","push","msg","map"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Link, useHistory, useParams } from \"react-router-dom\";\r\n\r\nconst DEFAULT_SIGHTING = {\r\n  sightingId: 0,\r\n  bugType: \"\",\r\n  order: {\r\n    bugOrderId: 0,\r\n    name: \"\",\r\n    description: \"\",\r\n  },\r\n  description: \"\",\r\n  date: \"\",\r\n  interest: 0,\r\n  imageUrl: \"\",\r\n};\r\n\r\nfunction SightingForm() {\r\n  const [sighting, setSighting] = useState(DEFAULT_SIGHTING);\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  const history = useHistory();\r\n\r\n  const { id } = useParams();\r\n\r\n  useEffect(\r\n    () => {\r\n      fetch('http://localhost:8080/order')\r\n        .then(response => response.json())\r\n        .then(data => setOrders(data));\r\n    },\r\n  \r\n    // Dependency array - only run this once when the component is initially loaded\r\n    []\r\n  );\r\n\r\n  useEffect(\r\n    () => {\r\n      // Only do this if there is an `id`\r\n      if (id) {\r\n        fetch(`http://localhost:8080/sighting/${id}`)\r\n          .then((response) => {\r\n            if (response.status !== 200) {\r\n              return Promise.reject(\"sighting fetch failed\");\r\n            }\r\n            return response.json();\r\n          })\r\n          .then((data) => setSighting(data))\r\n          .catch(console.log);\r\n      }\r\n    },\r\n\r\n    // Dependency array - only run this in response to any `id`\r\n    [id]\r\n  );\r\n\r\n  const handleChange = (event) => {\r\n    const updatedSighting = { ...sighting };\r\n\r\n    if (event.target.name === \"order\") {\r\n      const bugOrderId = Number.parseInt(event.target.value);\r\n      updatedSighting.order = orders.find(order => order.bugOrderId === bugOrderId);\r\n    } else {\r\n      updatedSighting[event.target.name] = event.target.value;\r\n    }\r\n\r\n    setSighting(updatedSighting);\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    const updatedSighting = { ...sighting };\r\n\r\n    if (id) {\r\n      const init = {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"application/json\",\r\n        },\r\n        body: JSON.stringify(updatedSighting),\r\n      };\r\n\r\n      fetch(`http://localhost:8080/sighting/${id}`, init)\r\n        .then((response) => {\r\n          if (response.status !== 204) {\r\n            return Promise.reject(\"response is not 204 No Content\");\r\n          }\r\n          return null;\r\n        })\r\n        .then((data) => {\r\n          history.push(\"/confirmation\", { msg: \"üëçüèæ\" });\r\n        })\r\n        .catch(() => {\r\n          history.push(\"/error\", { msg: \"üëéüèæ\" });\r\n        });\r\n    } else {\r\n      const init = {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Accept: \"application/json\",\r\n        },\r\n        body: JSON.stringify(updatedSighting),\r\n      };\r\n\r\n      fetch(\"http://localhost:8080/sighting\", init)\r\n        .then((response) => {\r\n          if (response.status !== 201) {\r\n            return Promise.reject(\"response is not 200 OK\");\r\n          }\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          history.push(\"/confirmation\", { msg: \"üëçüèæ\" });\r\n        })\r\n        .catch(() => {\r\n          history.push(\"/error\", { msg: \"üëéüèæ\" });\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <h2>{sighting.sightingId ? \"Update A Sighting\" : \"Add A Sighting\"}</h2>\r\n\r\n      <div>\r\n        <label htmlFor=\"bugType\">Bug Type</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"bugType\"\r\n          required\r\n          value={sighting.bugType}\r\n          name=\"bugType\"\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"order\">Order</label>\r\n        <select\r\n          id=\"order\"\r\n          required\r\n          value={sighting.order.bugOrderId}\r\n          name=\"order\"\r\n          onChange={handleChange}\r\n        >\r\n          <option value=\"0\">-- Choose --</option>\r\n          {orders.map(order => (\r\n            <option key={order.bugOrderId} value={order.bugOrderId}>{order.name} ({order.description})</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"description\">Description</label>\r\n        <textarea\r\n          id=\"description\"\r\n          required\r\n          value={sighting.description}\r\n          name=\"description\"\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"date\">Date</label>\r\n        <input\r\n          type=\"date\"\r\n          id=\"date\"\r\n          required\r\n          value={sighting.date}\r\n          name=\"date\"\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"interest\">Interest</label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"interest\"\r\n          min=\"0.00\"\r\n          step=\"0.01\"\r\n          required\r\n          value={sighting.interest}\r\n          name=\"interest\"\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"imageURL\">Image URL</label>\r\n        <input\r\n          type=\"url\"\r\n          id=\"imageURL\"\r\n          defaultValue={sighting.imageUrl}\r\n          name=\"imageUrl\"\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <button type=\"submit\">Save</button>\r\n        <Link to=\"/\">Cancel</Link>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default SightingForm;\r\n"]},"metadata":{},"sourceType":"module"}